<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobQ Platform Dashboard</title>
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.11"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: {
                        slate: { 850: '#151f32', 900: '#0f172a', 950: '#020617' }
                    }
                }
            }
        }
    </script>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        body {
            background-color: #020617;
            color: #f8fafc;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .htmx-indicator {
            display: none;
        }

        .htmx-request .htmx-indicator {
            display: inline-block;
        }
    </style>
</head>

<body class="antialiased min-h-screen flex flex-col selection:bg-indigo-500/30">

    <!-- Minimal Header -->
    <header
        class="glass-panel sticky top-0 z-40 border-b border-white/5 px-6 py-4 flex justify-between items-center shadow-2xl">
        <div class="flex items-center gap-3">
            <div
                class="bg-indigo-500/20 p-2 rounded-lg border border-indigo-500/30 shadow-[0_0_15px_rgba(99,102,241,0.2)]">
                <svg class="w-6 h-6 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                        d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                    </path>
                </svg>
            </div>
            <div>
                <h1 class="text-xl font-bold tracking-tight text-white leading-tight">JobQ</h1>
                <p class="text-[10px] font-mono uppercase tracking-widest text-indigo-400/80 font-semibold">Mission
                    Control</p>
            </div>
        </div>

        <div class="flex items-center gap-4 text-sm font-medium">
            <div class="flex items-center gap-2 px-3 py-1 rounded-full bg-slate-800/50 border border-slate-700/50">
                <span class="relative flex h-2.5 w-2.5">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"></span>
                </span>
                <span class="text-xs text-slate-300 tracking-wide">Live Polling</span>
                <!-- Loading Indicator -->
                <svg class="htmx-indicator w-3 h-3 text-indigo-400 animate-spin ml-1" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                    </path>
                </svg>
            </div>
        </div>
    </header>

    <!-- Main HTMX Content -->
    <main class="flex-grow p-6 md:px-10 lg:py-8 max-w-7xl mx-auto w-full relative z-10">

        <input type="hidden" name="status" value="">

        <!-- Stats Container (Auto-refreshes every 5s) -->
        <div id="stats-container" hx-get="/jobq/htmx/stats" hx-trigger="every 5s, load" hx-include="[name='status']">
            <!-- Rendered by Server -->
        </div>

        <!-- Jobs List Section -->
        <div class="glass-panel rounded-2xl overflow-hidden flex flex-col h-[650px] relative shadow-2xl">

            <div
                class="px-6 py-4 border-b border-slate-800/60 bg-slate-900/40 flex justify-between items-center backdrop-blur-md">
                <h2 class="font-semibold text-lg text-slate-100 tracking-tight">Job Execution Log</h2>
                <div id="pagination-controls">
                    <!-- Rendered by Server OOB -->
                </div>
            </div>

            <!-- Table Container (Auto-refreshes every 5s) -->
            <div class="overflow-y-auto flex-grow relative bg-slate-950/20">
                <table class="w-full text-left text-sm whitespace-nowrap">
                    <thead
                        class="bg-slate-900/80 backdrop-blur-md sticky top-0 border-b border-slate-800 text-slate-400 font-medium z-0 text-xs uppercase tracking-wider">
                        <tr>
                            <th class="px-6 py-4 font-semibold">Status</th>
                            <th class="px-6 py-4 font-semibold">Type</th>
                            <th class="px-6 py-4 text-center font-semibold">Reliability</th>
                            <th class="px-6 py-4 font-semibold">Timeline</th>
                            <th class="px-6 py-4 font-semibold">Tracking ID</th>
                            <th class="px-6 py-4 font-semibold text-right">Inspect</th>
                        </tr>
                    </thead>
                    <tbody id="jobs-container" class="divide-y divide-slate-800/50" hx-get="/jobq/htmx/jobs"
                        hx-trigger="every 5s, load" hx-include="[name='status']">
                        <!-- Rows rendered by Server -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Slide-over Modal Target -->
    <div id="modal-container"></div>

    <!-- Decorative ambient glow -->
    <div
        class="fixed top-[-20%] left-[-10%] w-[50%] h-[50%] rounded-full bg-indigo-900/20 blur-[120px] pointer-events-none z-0">
    </div>
    <div
        class="fixed bottom-[-20%] right-[-10%] w-[50%] h-[50%] rounded-full bg-blue-900/20 blur-[120px] pointer-events-none z-0">
    </div>
</body>

</html>